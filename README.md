# intro

系统调用 - 科创项目

## 1. 需求分析

1. 将`gdb`调试过程进行可视化展示。

2. 单步调试并判断**系统调用**。

3. 主要用于教学演示和实验。

## 2. 技术分析

### 初期技术分析

本项目主要基于`python`语言，并采用`gdb`、`ptrace`、`web`等技术进行实现。

- 通过`gdb`的`python`扩展插件，实现在`python`中调用`gdb`，并获取`gdb`调试`elf`程序的过程和结果。

- 通过`ptrace`单步执行程序，检测并获取系统调用。

- 通过`web`实现项目的展示。前后端进行分离，前端使用`vue`+`bootstrap`框架，后端使用`django`框架。

### 中期技术分析

- 放弃`ptrace`，检测系统调用改由`gdb`中的`catch`命令来实现。

- `api`接口直接返回`json`化数据，放弃使用`rest-framework`。

- 需要在`gdb`中实现一个简单服务器，用于与`Django`服务器通信。总体形成 `gdb server -- django backend -- web fontend` 三位一体的架构。

## 3. 具体计划和进展

### 寒假阶段 2019/1 ~ 2019/2

详情见[寒假规划文档](./winHolidayPlan.md)

### 第一次开会 2019/3/12

| 具体任务 | 开始时间 | 完成时间 | 负责人 | 备注 | 完成情况 |
|---|---|---|---|---|---|
| 接口文档 | 2019/3/12 | 2019/3/14 | 李双玖 | 大家讨论 | [api文档](./apiDoc.md)|
| 前端 | 2019/3/12 | 2019/3/20+ | 汤茂哥+李双玖 | 只实现了简单的展示 | [gdbweb](https://github.com/gu-team/gdbweb) |
| 后端 | 2019/3/12 | 2019/3/20+ | 秦瑞哲+黄宇轩+李双玖 | django实现api接口的demo | [djangoDemo](https://github.com/gu-team/djangoDemo) |

### 第二次开会 2019/3/22

会议内容：

- 展示了前端的简单界面；
- 讨论如何实现系统调用，以及`ptrace`的使用。

新阶段规划：

| 具体任务 | 开始时间 | 完成时间 | 负责人 | 备注 | 完成情况 |
|---|---|---|---|---|---|
| 前端继续完善页面 | 2019/3/22 | 2019/3/30+ | 汤茂哥+李双玖 | | [gdbweb](https://github.com/gu-team/gdbweb) |
| 后端开始实现部分接口 | 2019/3/22 | 2019/3/30+ | 秦瑞哲+黄宇轩+李双玖 | 已实现两个简单接口，直接通过`json`化返回，不使用`restful`框架 | [djangoDemo](https://github.com/gu-team/djangoDemo)中的`api`应用 |
| ptrace单步执行的demo | 2019/3/22 | 2019/3/30+ | 秦瑞哲+李双玖 | 放弃改用`gdb`的`catch`监视系统调用 | |

### 第三次开会

demo展示文档：

主要展示服务端`django`与`gdb server`之间的通信：[demoDoc.md](./demoDoc.md)

需要讨论的问题：

- `gdb`端与`django`端是否要分离成两个项目？还有，项目取啥名字呢？

- `gdb`端存在一些问题：
    - 1.`gdb`同一时刻只能运行一个文件，怎么为多个用户服务？
    - 2.`gdb`端如何记住用户之前的状态。比如，用户访问完`start`接口后，隔了一段时间，再访问`continue`接口，`gdb`怎么知道该用户有没有`start`过。如果，只为一个用户服务，可以不考虑这个问题。

- 项目`python`代码编写规范，请大师傅们指示一下。

新阶段的规划：